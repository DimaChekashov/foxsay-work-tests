(this["webpackJsonpdirectum-photos"]=this["webpackJsonpdirectum-photos"]||[]).push([[0],{75:function(e,t,c){},84:function(e,t,c){},86:function(e,t,c){},87:function(e,t,c){},88:function(e,t,c){},90:function(e,t,c){},91:function(e,t,c){},92:function(e,t,c){},93:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),a=c(8),s=c.n(a),i=(c(75),c(18)),o=c(34),l=c(25),j=c.n(l),u=c(41);function b(e){return h.apply(this,arguments)}function h(){return(h=Object(u.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:if(400!==t.status){e.next=7;break}return e.next=5,t.json();case 5:throw c=e.sent,new Error(c.message);case 7:throw new Error("Network response was not ok.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){throw console.error("API call failed. "+e),e}var O="https://jsonplaceholder.typicode.com/";function f(){var e=localStorage.getItem("photos");return e?new Promise((function(t){return t(JSON.parse(e))})):fetch(O+"photos/").then((function(e){return b(e)})).then((function(e){return localStorage.setItem("photos",JSON.stringify(e)),e})).catch(d)}var x,p=c(26),m=c(35),v=c(36),g="idle",N="loading",y="succeeded",S="failed",w={photos:[],loading:g,error:null},I=Object(m.b)("photos/fetchPhotos",Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),k=Object(m.c)({name:"photos",initialState:w,reducers:{},extraReducers:(x={},Object(p.a)(x,I.pending,(function(e,t){e.loading=N})),Object(p.a)(x,I.fulfilled,(function(e,t){e.loading=y,e.photos=t.payload})),Object(p.a)(x,I.rejected,(function(e,t){e.loading=S,e.error=t.error.message})),x)}).reducer,P=Object(v.a)((function(e){return{photos:e.photos.photos,loading:e.photos.loading,error:e.photos.error}}),(function(e){return e})),_=c(124),C=(c(84),c(2));var J=function(){return Object(C.jsx)("div",{className:"loader",children:Object(C.jsx)(_.a,{size:80})})};c(86);var E=function(e){var t=e.isOpenedProfile,c=e.setIsOpenedProfile,r=e.setCurrentUserId,a=Object(o.c)(P),s=a.photos,i=a.loading,l=a.error,j=Object(o.b)();return Object(n.useEffect)((function(){f().then(console.log),j(I())}),[j]),i===N||i===g?Object(C.jsx)("div",{className:"gallery",children:Object(C.jsx)(J,{})}):i===S?Object(C.jsx)("h3",{children:l}):Object(C.jsx)("div",{className:"gallery",children:s.map((function(e){var n=e.id,a=e.albumId,s=e.thumbnailUrl,i=e.title;return Object(C.jsx)("img",{src:s,alt:i,onClick:function(){c(!t),r(a)}},"photo-"+n)}))})};c(87);var B=function(){return Object(C.jsx)("div",{className:"small-loader",children:Object(C.jsx)(_.a,{size:60})})},U=c(60),z=c(139),G=c(128),A=c(129),R=c(130),T=c(46),W=c(61),q=c.n(W),D=c(127),F=(c(88),r.a.forwardRef((function(e,t){return Object(C.jsx)(D.a,Object(U.a)({direction:"up",ref:t},e))})));var H=function(e){var t=e.open,c=e.handleClose,r=e.album,a=Object(n.useState)([]),s=Object(i.a)(a,2),o=s[0],l=s[1],j=r.id,u=r.title;return Object(n.useEffect)((function(){f().then((function(e){return e.filter((function(e){return e.albumId===j}))})).then(l).catch(console.error)}),[j]),Object(C.jsx)("div",{children:Object(C.jsxs)(z.a,{fullScreen:!0,open:t,onClose:c,TransitionComponent:F,children:[Object(C.jsx)(G.a,{children:Object(C.jsxs)(A.a,{children:[Object(C.jsx)(R.a,{edge:"start",color:"inherit",onClick:c,"aria-label":"close",children:Object(C.jsx)(q.a,{})}),Object(C.jsx)(T.a,{variant:"h6",children:u})]})}),Object(C.jsx)("div",{className:"album-content",children:o.map((function(e){var t=e.id,c=e.thumbnailUrl,n=e.title;return Object(C.jsx)("img",{src:c,alt:n},"photo-"+t)}))})]})})},K=c(131),L=c(132),M=c(133),Q=c(134),V=c(135),X=c(62),Y=c.n(X),Z=c(137),$=c(136);c(90);var ee=function(e){var t=e.userId,c=Object(n.useState)({}),a=Object(i.a)(c,2),s=a[0],o=a[1],l=Object(n.useState)([]),j=Object(i.a)(l,2),u=j[0],h=j[1],f=r.a.useState(!1),x=Object(i.a)(f,2),p=x[0],m=x[1],v=r.a.useState(),g=Object(i.a)(v,2),N=g[0],y=g[1];Object(n.useEffect)((function(){(function(e){var t=localStorage.getItem("user-"+e);return t?new Promise((function(e){return e(JSON.parse(t))})):fetch(O+"users/".concat(e)).then((function(e){return b(e)})).then((function(t){return localStorage.setItem("user-"+e,JSON.stringify(t)),t})).catch(d)})(t).then(o).catch(console.error),function(){var e=localStorage.getItem("albums");return e?new Promise((function(t){return t(JSON.parse(e))})):fetch(O+"albums/").then((function(e){return b(e)})).then((function(e){return localStorage.setItem("albums",JSON.stringify(e)),e})).catch(d)}().then((function(e){h(e.filter((function(e){return e.userId===t})))})).catch(console.error)}),[t]);var S=s.name,w=s.username,I=s.email,k=s.phone,P=s.website,_=s.address,E=void 0===_?{}:_,U=s.company,z=void 0===U?{}:U;return 0===Object.keys(s).length?Object(C.jsx)("div",{className:"profile",children:Object(C.jsx)(J,{})}):Object(C.jsx)("div",{className:"profile",children:Object(C.jsxs)(K.a,{maxWidth:"lg",children:[Object(C.jsxs)("div",{className:"profile__block",children:[Object(C.jsxs)("h2",{className:"profile__title",children:["\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",w]}),Object(C.jsxs)(L.a,{container:!0,spacing:2,children:[Object(C.jsxs)(L.a,{item:!0,xs:12,lg:4,children:[Object(C.jsx)(T.a,{gutterBottom:!0,variant:"h6",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(C.jsxs)(M.a,{className:"profile__list",children:[Object(C.jsx)(Q.a,{children:Object(C.jsx)(V.a,{primary:"\u0418\u043c\u044f: ".concat(S)})}),Object(C.jsx)($.a,{}),Object(C.jsx)(Q.a,{children:Object(C.jsxs)(V.a,{children:["E-mail: ",Object(C.jsx)("a",{href:"mailto:"+I,children:I})]})}),Object(C.jsx)($.a,{}),Object(C.jsx)(Q.a,{children:Object(C.jsx)(V.a,{primary:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d: ".concat(k)})}),Object(C.jsx)($.a,{}),Object(C.jsx)(Q.a,{children:Object(C.jsxs)(V.a,{children:["\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0441\u0430\u0439\u0442: ",Object(C.jsx)("a",{href:"http://"+P,children:P})]})})]})]}),Object(C.jsxs)(L.a,{item:!0,xs:12,lg:4,children:[Object(C.jsx)(T.a,{gutterBottom:!0,variant:"h6",children:"\u0410\u0434\u0440\u0435\u0441\u0441"}),Object(C.jsxs)(M.a,{className:"profile__list",children:[Object(C.jsx)(Q.a,{children:Object(C.jsx)(V.a,{primary:"\u0423\u043b\u0438\u0446\u0430: ".concat(E.street)})}),Object(C.jsx)($.a,{}),Object(C.jsx)(Q.a,{children:Object(C.jsx)(V.a,{primary:"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u043c\u0430: ".concat(E.suite)})}),Object(C.jsx)($.a,{}),Object(C.jsx)(Q.a,{children:Object(C.jsx)(V.a,{primary:"\u0413\u043e\u0440\u043e\u0434: ".concat(E.city)})}),Object(C.jsx)($.a,{}),Object(C.jsx)(Q.a,{children:Object(C.jsx)(V.a,{primary:"\u0417\u0438\u043f-\u043a\u043e\u0434: ".concat(E.zipcode)})})]})]}),Object(C.jsxs)(L.a,{item:!0,xs:12,lg:4,children:[Object(C.jsx)(T.a,{gutterBottom:!0,variant:"h6",children:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f"}),Object(C.jsxs)(M.a,{className:"profile__list",children:[Object(C.jsx)(Q.a,{children:Object(C.jsx)(V.a,{primary:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f: ".concat(z.name)})}),Object(C.jsx)($.a,{}),Object(C.jsx)(Q.a,{children:Object(C.jsx)(V.a,{primary:"\u0424\u0440\u0430\u0437\u0430: ".concat(z.catchPhrase)})})]})]})]})]}),Object(C.jsxs)("div",{className:"albums-block",children:[Object(C.jsx)("h2",{className:"albums-block__title",children:"\u0410\u043b\u044c\u0431\u043e\u043c\u044b"}),0===u.length?Object(C.jsx)(B,{}):Object(C.jsx)(L.a,{container:!0,spacing:2,children:u.map((function(e){return Object(C.jsx)(L.a,{item:!0,xs:12,lg:4,children:Object(C.jsx)(Z.a,{onClick:function(){return function(e){y(e),m(!0)}(e)},className:"album-btn",variant:"contained",color:"primary",startIcon:Object(C.jsx)(Y.a,{}),children:e.title})},"album-"+e.id)}))})]}),N?Object(C.jsx)(H,{album:N,open:p,handleClose:function(){m(!1)}}):null]})})},te=(c(91),c(138)),ce=(c(92),Object(te.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}})));var ne=function(e){var t=e.isOpenedProfile,c=e.setIsOpenedProfile,n=ce();return Object(C.jsx)("div",{className:n.root,children:Object(C.jsx)(G.a,{className:"header",position:"static",children:Object(C.jsxs)(A.a,{children:[Object(C.jsx)(T.a,{variant:"h6",className:n.title,children:"PhotoGallery"}),t?Object(C.jsx)(Z.a,{color:"inherit",onClick:function(){return c(!t)},children:"\u041d\u0430\u0437\u0430\u0434"}):null]})})})};var re=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(),s=Object(i.a)(a,2),o=s[0],l=s[1];return Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)(ne,{isOpenedProfile:c,setIsOpenedProfile:r}),c?Object(C.jsx)(ee,{userId:o}):Object(C.jsx)(E,{setCurrentUserId:l,isOpenedProfile:c,setIsOpenedProfile:r})]})},ae=Object(m.a)({reducer:{photos:k}});s.a.render(Object(C.jsx)(o.a,{store:ae,children:Object(C.jsx)(re,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.85edf7fa.chunk.js.map