//!autogenerated 
//src: D:\workspaces\stack-2021\foxsay-work-tests\zavod-games\layout\jml\storage\storage.jml
//md5: 8b4580f6cdad893710f97d7d7c69b7c6
package jetgui.generated.jml;

import jetgui.*;
import jetgui.data.*;
import jetgui.generated.jss.*;
import jetgui.generated.jtp.*;
import jetgui.SafeCode;
import jetgui.style.*;
import jetgui.style.EColor;
import jetgui.style.EColorMatrix;
import jetgui.style.EInteract;
import jetgui.style.ESize;
import jetgui.vdom.*;
import taonga.templates.tpl.*;

import jetgui.fn.GuiFunctionList.*;

using jetgui.JetContextHelper;

class StorageStorage extends VDomComponent {

#if jetguiPreview

	private static var expose: Bool = {
		JetguiPreview.classList["StorageStorage"] = StorageStorage;
		true;
	}
	
	public var fieldTypes: Dynamic = {
		jtp: "JtpStorageStorage",
	}
	
	public var mockProps: Dynamic = {
		jtp: 'fs:storage.json',
	}

#end
	public var jtp: Null<JtpStorageStorage>;
	
	override public function createComponent(): Component {
		return new StorageStorageComponent();
	}
	
	override public function copyFrom(from: VDomComponent) {
		
		var f: StorageStorage = cast(from, StorageStorage);
		
		this.jtp = f.jtp;
	}
}

class StorageStorageComponent extends Component {
	
	static var styleRules: Null<Array<StyleRule>> = 
		{
			var styles: Array<Array<StyleRule>> = [
				JssJssMain.rules,
			];
			StyleSorter.sortStyles(styles);
		}
	
	
	public var jtp(get, set): Null<JtpStorageStorage>;
	public var jtp_value: Value<JtpStorageStorage>;
	public var storageFill(get, never): Null<Int>;
	public var storageFill_value: Value<Int>;
	public var storageLimit(get, never): Null<Int>;
	public var storageLimit_value: Value<Int>;
	public var isFullUpgrade(get, never): Null<Bool>;
	public var isFullUpgrade_value: Value<Bool>;

	private inline function get_jtp() {
		return jtp_value.get();
	}
	
	private inline function set_jtp(v) {
		jtp_value.set(v); 
		return v; 
	}
	
	private inline function get_storageFill() {
		return storageFill_value.get();
	}

	private inline function get_storageLimit() {
		return storageLimit_value.get();
	}

	private inline function get_isFullUpgrade() {
		return isFullUpgrade_value.get();
	}


	
	public function new() {
		
		jtp_value = new Value<JtpStorageStorage>();
		storageFill_value = new Value<Int>();
		storageFill_value.setCompute(()->SafeCode.run(jtp.storageFill));
		storageLimit_value = new Value<Int>();
		storageLimit_value.setCompute(()->SafeCode.run(jtp.storageLimit));
		isFullUpgrade_value = new Value<Bool>();
		isFullUpgrade_value.setCompute(()->SafeCode.run(jtp.isFullUpgrade));
	}
	override public function applyVDomAttributes(vDomNode: VDomNode): Void {
		
		var v: StorageStorage = cast(vDomNode, StorageStorage);
		jtp = v.jtp;
		ctx = v.ctx;
	}
	
	override public function render(vDom: VDomComponent): Null<Array<VDomNode>> {
		var result: Array<VDomNode> = [];
		result.push({
			var e = new VDomElement(VDomIdMacro.makeId());
			e.styleRules = styleRules;
			e.tag = SafeCode.run("vbox");
			e.classList = SafeCode.run("granary-menu");
			e.addChild({
				var e = new VDomElement(VDomIdMacro.makeId());
				e.styleRules = styleRules;
				e.tag = SafeCode.run("box");
				e.classList = SafeCode.run("header");
				e.addChild({
					var e = new VDomElement(VDomIdMacro.makeId());
					e.styleRules = styleRules;
					e.tag = SafeCode.run("hbox");
					e.classList = SafeCode.run("resources");
					e.addChild({
						var e = new VDomElement(VDomIdMacro.makeId());
						e.styleRules = styleRules;
						e.tag = SafeCode.run("hbox");
						e.classList = SafeCode.run("resources__item stars");
						e.addChild({
							var e = new VDomElement(VDomIdMacro.makeId());
							e.styleRules = styleRules;
							e.tag = SafeCode.run("img");
							e.src = SafeCode.run(new JetAssetPath("jetgui/icon/expS.png"));
							e;
						});
						e.addChild({
							var e = new VDomElement(VDomIdMacro.makeId());
							e.styleRules = styleRules;
							e.tag = SafeCode.run("text");
							e.classList = SafeCode.run("resources__text");
							e.value = SafeCode.run("21");
							e;
						});
						e;
					});
					e.addChild({
						var e = new VDomElement(VDomIdMacro.makeId());
						e.styleRules = styleRules;
						e.tag = SafeCode.run("hbox");
						e.classList = SafeCode.run("resources__item diamonds");
						e.addChild({
							var e = new VDomElement(VDomIdMacro.makeId());
							e.styleRules = styleRules;
							e.tag = SafeCode.run("img");
							e.src = SafeCode.run(new JetAssetPath("jetgui/icon/hardS.png"));
							e;
						});
						e.addChild({
							var e = new VDomElement(VDomIdMacro.makeId());
							e.styleRules = styleRules;
							e.tag = SafeCode.run("text");
							e.classList = SafeCode.run("resources__text");
							e.value = SafeCode.run("240");
							e;
						});
						e;
					});
					e.addChild({
						var e = new VDomElement(VDomIdMacro.makeId());
						e.styleRules = styleRules;
						e.tag = SafeCode.run("hbox");
						e.classList = SafeCode.run("resources__item coins");
						e.addChild({
							var e = new VDomElement(VDomIdMacro.makeId());
							e.styleRules = styleRules;
							e.tag = SafeCode.run("img");
							e.src = SafeCode.run(new JetAssetPath("jetgui/icon/softS.png"));
							e;
						});
						e.addChild({
							var e = new VDomElement(VDomIdMacro.makeId());
							e.styleRules = styleRules;
							e.tag = SafeCode.run("text");
							e.classList = SafeCode.run("resources__text");
							e.value = SafeCode.run("74395");
							e;
						});
						e;
					});
					e;
				});
				e.addChild({
					var e = new VDomElement(VDomIdMacro.makeId());
					e.styleRules = styleRules;
					e.tag = SafeCode.run("text");
					e.value = SafeCode.run("Granary");
					e.classList = SafeCode.run("title");
					e;
				});
				e.addChild({
					var e = new VDomElement(VDomIdMacro.makeId());
					e.styleRules = styleRules;
					e.tag = SafeCode.run("box");
					e.classList = SafeCode.run("close-btn");
					e;
				});
				e;
			});
			e.addChild({
				var e = new VDomElement(VDomIdMacro.makeId());
				e.styleRules = styleRules;
				e.tag = SafeCode.run("box");
				e.classList = SafeCode.run("body");
				e.addChild({
					var e = new VDomElement(VDomIdMacro.makeId());
					e.styleRules = styleRules;
					e.tag = SafeCode.run("box");
					e.classList = SafeCode.run("back-btn");
					e;
				});
				e.addChild({
					var e = new VDomElement(VDomIdMacro.makeId());
					e.styleRules = styleRules;
					e.tag = SafeCode.run("hbox");
					e.classList = SafeCode.run("body__block");
					e.addChild({
						var e = new VDomElement(VDomIdMacro.makeId());
						e.styleRules = styleRules;
						e.tag = SafeCode.run("vbox");
						e.classList = SafeCode.run("sidebar");
						e.addChild({
							var e = new VDomElement(VDomIdMacro.makeId());
							e.styleRules = styleRules;
							e.tag = SafeCode.run("vbox");
							e.classList = SafeCode.run("navigation");
							e.addChild({
								var e = new VDomElement(VDomIdMacro.makeId());
								e.styleRules = styleRules;
								e.tag = SafeCode.run("vbox");
								e.classList = SafeCode.run("navigation__wrapper");
								e.addChild({
									var e = new VDomElement(VDomIdMacro.makeId());
									e.styleRules = styleRules;
									e.tag = SafeCode.run("img");
									e.src = SafeCode.run(new JetAssetPath("jetgui/header/headerGoods.png"));
									e;
								});
								var iterable;
								iterable = SafeCode.run(jtp.storageTabList);
								if(iterable != null) {
									for(tab in iterable) {
										var condition: Null<Bool>;
										condition = SafeCode.run( tab.isSelected );
										if(condition) {
											e.addChild({
												var e = new VDomElement(VDomIdMacro.makeId());
												e.styleRules = styleRules;
												e.tag = SafeCode.run("box");
												e.classList = SafeCode.run("navigation__link active" + (tab.isLast ? " last-link" : ""));
												e.addChild({
													var e = new VDomElement(VDomIdMacro.makeId());
													e.styleRules = styleRules;
													e.tag = SafeCode.run("text");
													e.value = SafeCode.run(tab.title);
													e.classList = SafeCode.run("navigation__link__text active" + (tab.isLast ? " last-link" : ""));
													e;
												});
												var condition: Null<Bool>;
												condition = SafeCode.run(!tab.isLast);
												if(condition) {
													e.addChild({
														var e = new VDomElement(VDomIdMacro.makeId());
														e.styleRules = styleRules;
														e.tag = SafeCode.run("img");
														e.src = SafeCode.run(new JetAssetPath("jetgui/tabList/divider.png"));
														e.classList = SafeCode.run("navigation__link__divider active");
														e;
													});
												}
												e;
											});
										}
										var condition: Null<Bool>;
										condition = SafeCode.run( !tab.isSelected );
										if(condition) {
											e.addChild({
												var e = new VDomElement(VDomIdMacro.makeId());
												e.styleRules = styleRules;
												e.tag = SafeCode.run("box");
												e.classList = SafeCode.run("navigation__link" + (tab.isLast ? " last-link" : ""));
												e.addChild({
													var e = new VDomElement(VDomIdMacro.makeId());
													e.styleRules = styleRules;
													e.tag = SafeCode.run("text");
													e.value = SafeCode.run(tab.title);
													e.classList = SafeCode.run("navigation__link__text" + (tab.isLast ? " last-link" : ""));
													e;
												});
												var condition: Null<Bool>;
												condition = SafeCode.run(!tab.isLast);
												if(condition) {
													e.addChild({
														var e = new VDomElement(VDomIdMacro.makeId());
														e.styleRules = styleRules;
														e.tag = SafeCode.run("img");
														e.src = SafeCode.run(new JetAssetPath("jetgui/tabList/divider.png"));
														e.classList = SafeCode.run("navigation__link__divider");
														e;
													});
												}
												e;
											});
										}
									}
								}
								e;
							});
							e;
						});
						e.addChild({
							var e = new VDomElement(VDomIdMacro.makeId());
							e.styleRules = styleRules;
							e.tag = SafeCode.run("vbox");
							e.classList = SafeCode.run("progress");
							e.addChild({
								var e = new VDomElement(VDomIdMacro.makeId());
								e.styleRules = styleRules;
								e.tag = SafeCode.run("text");
								e.value = SafeCode.run("Capacity");
								e.classList = SafeCode.run("progress__title");
								e;
							});
							e.addChild({
								var e = new VDomElement(VDomIdMacro.makeId());
								e.styleRules = styleRules;
								e.tag = SafeCode.run("box");
								e.classList = SafeCode.run("progress__wrapper");
								e.addChild({
									var e = new VDomElement(VDomIdMacro.makeId());
									e.styleRules = styleRules;
									e.tag = SafeCode.run("box");
									e.classList = SafeCode.run("progress__bar" + ((storageFill >= storageLimit) ? " full" : ""));
									e.width = SafeCode.run(percent(storageFill/storageLimit*100));
									e;
								});
								e.addChild({
									var e = new VDomElement(VDomIdMacro.makeId());
									e.styleRules = styleRules;
									e.tag = SafeCode.run("text");
									e.value = SafeCode.run( storageFill + "/" + storageLimit);
									e.classList = SafeCode.run("progress__text");
									e;
								});
								e;
							});
							e.addChild({
								var e = new VDomElement(VDomIdMacro.makeId());
								e.styleRules = styleRules;
								e.tag = SafeCode.run("box");
								e.classList = SafeCode.run("progress__bottom");
								e.addChild({
									var e = new VDomElement(VDomIdMacro.makeId());
									e.styleRules = styleRules;
									e.tag = SafeCode.run("text");
									e.value = SafeCode.run("Upgrade");
									e.classList = SafeCode.run("progress__btn");
									e;
								});
								e;
							});
							e;
						});
						e;
					});
					e.addChild({
						var e = new VDomElement(VDomIdMacro.makeId());
						e.styleRules = styleRules;
						e.tag = SafeCode.run("vbox");
						var iterable;
						iterable = SafeCode.run(jtp.storageRowList);
						if(iterable != null) {
							for(row in iterable) {
								e.addChild({
									var e = new VDomElement(VDomIdMacro.makeId());
									e.styleRules = styleRules;
									e.tag = SafeCode.run("hbox");
									e.spacing = SafeCode.run(21);
									var iterable;
									iterable = SafeCode.run(row);
									if(iterable != null) {
										for(storageItem in iterable) {
											e.addChild({
												var e = new StoragePrefabstorageitem(VDomIdMacro.makeId());
												e.styleRules = styleRules;
												e.ctx = ctx;
												e.storageItem = SafeCode.run(storageItem);
												e;
											});
										}
									}
									e;
								});
							}
						}
						e;
					});
					e;
				});
				e;
			});
			e;
		});
		return result;
	}	
}
