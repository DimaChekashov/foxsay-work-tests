(function(){"use strict";var t={8744:function(t,i,e){var o=e(5130),n=e(6768);function s(t,i,e,o,s,r){const a=(0,n.g2)("building");return(0,n.uX)(),(0,n.Wv)(a)}var r=e(4232);const a={class:"building"},u={class:"building__lifts"},l={class:"building__floors"},f={class:"building__controlls"},c={class:"building__title"},d=["onClick"];function h(t,i,e,o,s,h){const p=(0,n.g2)("lift");return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("div",u,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.lifts,(i=>((0,n.uX)(),(0,n.Wv)(p,{key:i.id+"-lift",boothHeight:t.floorHeight,data:i,onSetStatus:t.setLiftStatus},null,8,["boothHeight","data","onSetStatus"])))),128))]),(0,n.Lk)("div",l,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.floors,(i=>((0,n.uX)(),(0,n.CE)("div",{class:"building__floor",key:i+"-floor",style:(0,r.Tr)({height:`${t.floorHeight}px`})},[(0,n.Lk)("div",f,[(0,n.Lk)("div",c,(0,r.v_)(i),1),(0,n.Lk)("button",{class:(0,r.C4)(["building__btn",t.floorCalledBtns.has(i)?"active":""]),onClick:()=>t.moveTo(i)},null,10,d)])],4)))),128))])])}e(8743);const p={class:"lift"};function g(t,i,e,o,s,a){return(0,n.uX)(),(0,n.CE)("div",p,[(0,n.Lk)("div",{class:(0,r.C4)(["lift__booth","waiting"===t.data.status?"wait":""]),style:(0,r.Tr)({height:`${t.boothHeight}px`,bottom:t.data.position*t.boothHeight-t.boothHeight+"px",transition:`bottom ${t.animationDuration}s ease`})},[(0,n.Lk)("div",{class:(0,r.C4)(["lift__booth-label","ready"===t.data.status?"hide":""])},(0,r.v_)(t.isUp?"↑":"↓")+" "+(0,r.v_)(t.data.position),3)],6)])}var v=(0,n.pM)({name:"Lift",data(){return{animationDuration:1,isUp:!1}},props:{boothHeight:{type:Number,required:!0},data:{type:Object,required:!0,position:{type:Number,required:!0},status:{type:String,required:!0},id:{type:Number,required:!0}}},watch:{"data.position":function(t,i){this.animationDuration=Math.abs(i-t)+1,this.isUp=t>i,this.$emit("setStatus",{...this.data,status:"moving"}),setTimeout((()=>{this.$emit("setStatus",{...this.data,status:"waiting"}),setTimeout((()=>{this.$emit("setStatus",{...this.data,status:"ready"})}),3e3)}),1e3*this.animationDuration)}}}),m=e(1241);const b=(0,m.A)(v,[["render",g],["__scopeId","data-v-1f8a689c"]]);var _=b,y=(0,n.pM)({name:"Building",components:{Lift:_},data(){return{floorHeight:(window.innerHeight-30)/this.floors,queue:[],lifts:this.getLifts(),floorCalledBtns:new Set}},props:{floors:{type:Number,default:5},liftsAmount:{type:Number,default:1}},methods:{getLifts(){let t=localStorage.getItem("lifts"),i=localStorage.getItem("option");if(null!==i&&null!==t){let e=JSON.parse(i);if(e.floors===this.floors&&e.liftsAmount===this.liftsAmount)return JSON.parse(t)}return Array.from({length:this.liftsAmount},((t,i)=>({id:i,status:"ready",position:1})))},setLifts(){const t=this.lifts.map((t=>({...t,status:"ready"})));localStorage.setItem("lifts",JSON.stringify(t)),localStorage.setItem("option",JSON.stringify({floors:this.floors,liftsAmount:this.liftsAmount}))},moveTo(t){this.lifts.some((i=>i.position===t))||(this.floorCalledBtns.add(t),this.queue.push(t),this.checkQueue())},checkQueue(){const t=this.lifts.findIndex((t=>"ready"===t.status));-1!==t&&this.queue.length>0&&(this.lifts[t]={...this.lifts[t],position:this.queue.shift()})},setLiftStatus(t){this.lifts[t.id]=t,"waiting"===t.status&&this.floorCalledBtns.delete(t.position),"ready"===t.status&&this.setLifts(),this.checkQueue()}}});const k=(0,m.A)(y,[["render",h],["__scopeId","data-v-2c2c07ae"]]);var S=k,w=(0,n.pM)({name:"App",components:{Building:S}});const C=(0,m.A)(w,[["render",s]]);var O=C;(0,o.Ef)(O).mount("#app")}},i={};function e(o){var n=i[o];if(void 0!==n)return n.exports;var s=i[o]={exports:{}};return t[o](s,s.exports,e),s.exports}e.m=t,function(){var t=[];e.O=function(i,o,n,s){if(!o){var r=1/0;for(f=0;f<t.length;f++){o=t[f][0],n=t[f][1],s=t[f][2];for(var a=!0,u=0;u<o.length;u++)(!1&s||r>=s)&&Object.keys(e.O).every((function(t){return e.O[t](o[u])}))?o.splice(u--,1):(a=!1,s<r&&(r=s));if(a){t.splice(f--,1);var l=n();void 0!==l&&(i=l)}}return i}s=s||0;for(var f=t.length;f>0&&t[f-1][2]>s;f--)t[f]=t[f-1];t[f]=[o,n,s]}}(),function(){e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,{a:i}),i}}(),function(){e.d=function(t,i){for(var o in i)e.o(i,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:i[o]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)}}(),function(){var t={524:0};e.O.j=function(i){return 0===t[i]};var i=function(i,o){var n,s,r=o[0],a=o[1],u=o[2],l=0;if(r.some((function(i){return 0!==t[i]}))){for(n in a)e.o(a,n)&&(e.m[n]=a[n]);if(u)var f=u(e)}for(i&&i(o);l<r.length;l++)s=r[l],e.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return e.O(f)},o=self["webpackChunklifts_true_conf"]=self["webpackChunklifts_true_conf"]||[];o.forEach(i.bind(null,0)),o.push=i.bind(null,o.push.bind(o))}();var o=e.O(void 0,[504],(function(){return e(8744)}));o=e.O(o)})();
//# sourceMappingURL=app.e73b2d83.js.map